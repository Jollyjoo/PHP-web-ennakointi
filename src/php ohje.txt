# PHP-sovelluksen ajaminen ajastetusti Linux-palvelimella (crontab)

Tämä ohje neuvoo, kuinka PHP-skripti ajetaan automaattisesti kerran päivässä Linux-palvelimella käyttäen crontabia.

## 1. Varmista, että PHP on asennettu

Aja komento:
```
php -v
```
Jos PHP ei ole asennettu, asenna se esimerkiksi:
```
sudo apt-get update
sudo apt-get install php
```

## 2. Lataa tai kopioi PHP-sovellus palvelimelle

Siirrä haluamasi PHP-tiedosto (esim. `oma_skripti.php`) palvelimelle, esim. kansioon `/home/kayttaja/scripts/`.

## 3. Testaa skriptin toiminta komentoriviltä

Aja skripti käsin varmistaaksesi, että se toimii:
```
php /home/kayttaja/scripts/oma_skripti.php
```

## 4. Lisää ajastus crontabiin

Avaa crontab muokattavaksi:
```
crontab -e
```

Lisää rivi (esimerkki: suorita joka päivä klo 03:00):
```
0 3 * * * /usr/bin/php /home/kayttaja/scripts/oma_skripti.php >> /home/kayttaja/scripts/skripti.log 2>&1
```

- `0 3 * * *` = joka päivä klo 03:00
- `/usr/bin/php` = polku PHP-tulkkiin (tarkista komennolla `which php`)
- `/home/kayttaja/scripts/oma_skripti.php` = skriptin polku
- `>> ...skripti.log 2>&1` = ohjaa tulosteen ja virheet lokiin

Tallenna ja sulje crontab.

## 5. Tarkista, että ajastus toimii

- Tarkista lokitiedosto (`skripti.log`), että ajo onnistuu.
- Voit tarkistaa crontab-listan komennolla:
```
crontab -l
```

---

**Vinkki:**
- Jos skripti käyttää tiedostopolkuja, käytä aina absoluuttisia polkuja.
- Ympäristömuuttujat voivat poiketa crontab-ajossa verrattuna interaktiiviseen komentoriviin.

